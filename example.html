<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<link rel="stylesheet" type="text/css" href="slick/slick.css"/>

		<link rel="stylesheet" type="text/css" href="slick/slick-theme.css"/>
		<script type="text/javascript" src="./libgif.js"></script>
		<script type="text/javascript" src="./rubbable.js"></script>
		<script type="text/javascript" src="./jquery-2.2.1.js"></script>

		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
		<title>
			Example gif
		</title>
		<style>
			body {
				width: 90%;
				margin: 0 auto;
				background-color: #3498DB;
			}
		</style>
	</head>

	<body>
		<center>
			<h1>Example with controls and no auto-play</h1>

			<img id="example1" rel:animated_src="./example_gifs/cat-jumps-off-ledge.gif" rel:auto_play="0" width="467" height="375" />
			<br>
			<script type="text/javascript">

				function makeSlides(sup, container) {
					var length = sup.get_length();
					// var length = sup1.get_length();
					var i, canvas, slide, num;
					var $container = $(container);
					for (i = 0; i < length; i++) {
						sup.move_to(i);
						canvas = cloneCanvas(sup.get_canvas());
						slide = $("<div>");
						num = $("<div>"+ i +"</div>");
						slide.append($(canvas));
						slide.append(num);
						$container.append(slide);
						slide.on('click', {idx: i}, function (ev) {
							var destCtx = sup.get_canvas().getContext('2d');
							destCtx.drawImage($(this).find('canvas')[0], 0, 0);
							sup.move_to(ev.data.idx);
						});


					}
					sup.move_to(0);
					$container.slick({
						infinite: true,
						slidesToShow: 4,
						slidesToScroll: 4,
						dots: true,
						arrows: true
					});
				};
				var sup1;
				sup1 = new SuperGif({
					gif: document.getElementById('example1'),
					loop_mode: false,
					auto_play: false
				});
				sup1.load(function () {
					makeSlides(sup1, $("#container"));
				});

				function cloneCanvas(oldCanvas) {
				    //create a new canvas
				    var newCanvas = document.createElement('canvas');
				    var context = newCanvas.getContext('2d');

				    //set dimensions
				    newCanvas.width = oldCanvas.width;
				    newCanvas.height = oldCanvas.height;

				    //apply the old canvas to the new one
				    context.drawImage(oldCanvas, 0, 0);

				    //return the new canvas
				    return newCanvas;
				};


			</script>
			<a href="javascript:;" onmousedown="sup1.pause(); return false;">Pause</a> |
			<a href="javascript:;" onmousedown="sup1.play(); return false;">Play</a> |
			<a href="javascript:;" onmousedown="sup1.move_to(0); return false;">Restart</a> |
			<a href="javascript:;" onmousedown="sup1.move_relative(1); return false;">Step forward</a> |
			<a href="javascript:;" onmousedown="sup1.move_relative(-1); return false;">Step back</a>
			<br>
			<h1>Carousel Example</h1>
			<div id="container"></div>
			<!-- <h1>Example with rubbing and auto-play on</h1>
			<img id="example2" src="./example_gifs/16080912178832553f108791a4.gif" rel:auto_play="1" width="467" height="375" rel:rubbable="1" />
			<br>
			<script type="text/javascript">
				var sup2 = new RubbableGif({ gif: document.getElementById('example2') } );
				sup2.load();
			</script> -->

			<br>

			<span>your gif here</span>
			<input type="file" id="files" />
			<div id="localGifDiv">
			</div>
			<br>

			<a href="javascript:;" onmousedown="sup2.pause(); return false;">Pause</a> |
			<a href="javascript:;" onmousedown="sup2.play(); return false;">Play</a> |
			<a href="javascript:;" onmousedown="sup2.move_to(0); return false;">Restart</a> |
			<a href="javascript:;" onmousedown="sup2.move_relative(1); return false;">Step forward</a> |
			<a href="javascript:;" onmousedown="sup2.move_relative(-1); return false;">Step back</a>
			<br>
			<div id="container2"></div>
			<br>
			<script>
				var sup2;
				var $localGifDiv = $("#localGifDiv");
				var $container2 = $("#container2");
				document.getElementById("files").onchange = function () {
					$localGifDiv.html('');
					$container2.html('');
					$container2.removeAttr('class');
					$container2.removeAttr('role');
					var exampleGif = $("<img id=\"example2\" />");
					$localGifDiv.append(exampleGif);
					var reader = new FileReader();
					reader.onload = function (e) {
					    // get loaded data and render thumbnail.
					    var theImage = document.getElementById("example2");
					    theImage.src = e.target.result;

						sup2 = new SuperGif({
							gif: theImage,
							loop_mode: false,
							auto_play: false
						});
						sup2.load(function () {
							makeSlides(sup2, $container2);
						});
					};

					// read the image file as a data URL.
					reader.readAsDataURL(this.files[0]);
				};
			</script>
		</center>
	<script type="text/javascript" src="slick/slick.min.js"></script>
	</body>

</html>
